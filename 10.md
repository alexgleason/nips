NIP-10
======

Replies, Reposts, and Quote Posts in Text Events (kind 1)
---------------------------------------------------------

`draft` `optional` `author:unclebobmartin` `author:alexgleason`

## Abstract
This NIP describes how to use "e" and "p" tags in text events to denote replies, reposts, and quote posts.

## The "e" tag
Used to associate an event with another event.

`["e", <event-id>, <relay-url>, <marker>]`  
	
Where:

 * `<event-id>` is the id of the event being referenced.
 * `<relay-url>` is the URL of a recommended relay associated with the reference. Clients SHOULD add a valid `<relay-URL>` field, but may instead leave it as `""`.
 * `<marker>` is one of `"reply"`, `"mention"`, or `"root"`.

 `<marker>` MUST be one of the following:

 - `"reply"` - when the note is a reply, and the ID refers to its parent.
 - `"mention"` - when the note is a quote post, and the ID refers to the quoted event.
 - `"root"` - when the note is a reply, the event SHOULD include a root marker with the ID of the highest ancestor in the thread. This helps clients obtain all posts for a thread, and is usually copied down to every descendant.

When `"mention"` is used, the event content MUST include an index marker with the notation `#[index]` as specified in NIP-08, where the index matches the position of the `"e"` tag in the tags array. Note that a repost is a quote post without comment. For example, a quote post's content may look like `hello world\n#[0]`, while a repost would contain only `#[0]`.

Clients MUST NOT include multiple `"e"` tags with the same marker in an event. The order of "e" tags is not relevant.

## The "p" tag
Used in a text event contains a list of pubkeys used to record who is involved in a reply thread.

When replying to a text event E the reply event's "p" tags should contain all of E's "p" tags as well as the `"pubkey"` of the event being replied to.  

Example:  Given a text event authored by `a1` with "p" tags [`p1`, `p2`, `p3`] then the "p" tags of the reply should be [`a1`, `p1`, `p2`, `p3`] 
in no particular order.

Deprecations
------------

New clients should never submit deprecated events to relays, but may wish to process them for compatibility with legacy clients.

### Positional "e" tags (DEPRECATED)
>This scheme is in common use; but should be considered deprecated.
`["e", <event-id>, <relay-url>]`  as per NIP-01.

Where:

 * `<event-id>` is the id of the event being referenced.
 * `<relay-url>` is the URL of a recommended relay associated with the reference.  Many clients treat this field as optional.

**The positions of the "e" tags within the event denote specific meanings as follows**:

 * No "e" tag: <br>
 This event is not a reply to, nor does it refer to, any other event.

 * One "e" tag: <br>
 `["e", <id>]`: The id of the event to which this event is a reply.

 * Two "e" tags:  `["e", <root-id>]`, `["e", <reply-id>]` <br>
 `<root-id>` is the id of the event at the root of the reply chain.  `<reply-id>` is the id of the article to which this event is a reply.  

 * Many "e" tags: `["e", <root-id>]` `["e", <mention-id>]`, ..., `["e", <reply-id>]`<br>
There may be any number of `<mention-ids>`.  These are the ids of events which may, or may not be in the reply chain.  
They are citings from this event.  `root-id` and `reply-id` are as above.

>This scheme is deprecated because it creates ambiguities that are difficult, or impossible to resolve when an event references another but is not a reply.

### Kind 6 Reposts (DEPRECATED)
Historically, some clients used Event 6 to designate a repost. The event contained empty content (`""`) and a single "e" tag with the reposted event ID: `["e", <event-id>, <relay-url>]`.

This scheme has been deprecated in favor using Event 1 with with tagged content (`"#[0]"`) and a `"mention"` marker: `["e", <event-id>, <relay-url>, "mention"]`.